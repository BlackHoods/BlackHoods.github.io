<!DOCTYPE html>
<html>
<head>
    <meta name="generator" content="Hugo 0.27-DEV" />

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="My thoughts and rambles">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <link rel="icon" type="image/png" href="/images/favicon.ico">

    
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="icon" sizes="192x192" href="/images/touch/chrome-touch-icon-192x192.png">

    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Material Design Lite">
    <link rel="apple-touch-icon-precomposed" href="apple-touch-icon-precomposed.png">

    
    <meta name="msapplication-TileImage" content="images/touch/ms-touch-icon-144x144-precomposed.png">
    <meta name="msapplication-TileColor" content="#3372DF">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en"/>
    <link rel="stylesheet" href="/css/ionicons.min.css"/>
    <link rel="stylesheet" href="https://storage.googleapis.com/code.getmdl.io/1.1.3/material.grey-orange.min.css"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="/css/hmdl-style.css"/>
	<link rel="stylesheet" href="/css/pygment.css">


<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-103806632-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>


    <title>Garage door RF communication</title>
</head>

<body style="background-image: url('/images/background.jpg');">
    <div id="MainCnt" class="hmdl-body mdl-layout mdl-js-layout has-drawer is-upgraded">        
        <header class="mdl-layout__header mdl-layout__header--transparent mdl-layout__header--scroll">
            <div class="mdl-layout__header-row">
                <div class="mdl-layout-spacer"></div>
                <nav class="mdl-navigation">
                <a class="mdl-navigation__link" href="/">Home</a>
                <a class="mdl-navigation__link" href="/post/">Articles</a>
                <a class="mdl-navigation__link" href="/project/">Projects</a>
                <a class="mdl-navigation__link" href="/about/">About</a>
                </nav>
            </div>
        </header>
        <div class="mdl-layout__drawer">
            <nav class="mdl-navigation">
            <a class="mdl-navigation__link" href="/">Home</a>
            <a class="mdl-navigation__link" href="/post/">Articles</a>
            <a class="mdl-navigation__link" href="/project/">Projects</a>
            <a class="mdl-navigation__link" href="/about/">About</a>
            </nav>
        </div>

        <main class="mdl-layout__content">

		

            <div class="hmdl-page mdl-grid">
                <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">
                    <div class="mdl-card__media mdl-color-text--grey-50" style=" background-color:#FFF;">
                        <h3 style="color:orange;">Garage Door RF Communication</h3>
                    </div>
                    <div class="hmdl-page-meta mdl-color-text--grey-700 mdl-card__supporting-text">
                        <div class="minilogo" style="background-image: url('/images/Doopel_Profile/dopelrIcon.png');"></div>

                        <div>
							<strong>
                            		<strong>Doopel</strong>
							</strong>
                            <span>Sep 1, 2017</span>
                        </div>
                        <div class="section-spacer"></div>
                    </div>
                    <div class="hmdl-page-content mdl-color-text--grey-700 mdl-card__supporting-text">
                        

<h2 id="abstract">Abstract</h2>

<p>This the first of a serie of post where we are going to revese engineered a garage radio control to undertand how it works. In this first post we will describe how we have proceed in order to revese engineered the signal, present our first conclusions about our findings and which are going to be our next steps to hack the device.</p>

<p>This summer I wanted to introduce my self into the security RF world and what better way than take the first RF device that we have in our home and take a look how it works. We are writing this post to help those like us want to start in the radio security world explaing how we have start and proced to do our first investigation in a real device.</p>

<p>We highly recommened to take a look to <a href="https://greatscottgadgets.com/sdr/">Michael Ossmann&rsquo;s video classes</a> to get introduceded into the SDR wolrd. In this post we have used a software named <em>Universal Hacker Radio (UHR)</em> because it provides multiple useful fuctionalities such as:</p>

<ul>
<li>Spectrum analyser</li>
<li>Recording</li>
<li>Oscilloscope view</li>
<li>Analyze interface<br /></li>
</ul>

<h2 id="indentify-the-signal-frequency">Indentify the signal frequency</h2>

<p>To begin it is necesary to discove in which frequency the device is working. I recommened to check if your device is in <a href="https://fccid.io/">FCCID database</a>. It is a unique identifier assigned to a device registered with the United States Federal Communications Commission. Unfortunatly in our case it was not registed so we dig a little bit around Internet and we found that the device play around the 868 KHz.</p>

<p>In order to check it <strong>UHR</strong> has an spectrum analyzer functionality but I prefer to used the  <strong>osmocom_fft</strong> tool.
<img src="/assets/Garage_Door_RF_communication/ProtocolRerversing/Finding-Signal.png" alt="Spectrum analyzer" /></p>

<h4 id="tips">Tips</h4>

<ul>
<li>To visulize properlly the signal, set the frequecy a little bit lower or higher that the one which you are checking.</li>
<li>Check the peak hold option</li>
<li>Send multiple signal to confirm that it is the signal that you are looking for.</li>
<li>Remenber the <strong>HackRF</strong> has a limit of 2M samples per rate.</li>
</ul>

<h2 id="recording-the-signal">Recording the signal</h2>

<p>To record the packges I like to used the <em>URH</em> recording tool because it show you in real time what are you recoding and it add the record stream automatically to the analysis tab.</p>

<h2 id="signal-analysis">Signal analysis</h2>

<p>There are two esential things that it is necesary to know about the signal, which kind of modulation has been used and which is the bit legth/symbol length.
Taking a look to the recorded signal and zooming in we can say that the signal looks like, it is a form of amplitude modulation that represents digital data, specifically it is <em>On-Off-keys</em> modulation. It is the simplest form of <em>amplitude-shift keying (ASK)</em> modulation that represents digital data at the presence or absence of a carrier wave.In its simplest form, the presence of a carrier for a specific duration represents a binary one, while its absence for the same duration represents a binary zero.
<img src="/assets/Garage_Door_RF_communication/ProtocolRerversing/RawStream.png" alt="Raw stream" />
<img src="/assets/Garage_Door_RF_communication/ProtocolRerversing/RawStream2.png" alt="Raw stream 2" />
<img src="/assets/Garage_Door_RF_communication/ProtocolRerversing/RawStream3.png" alt="Raw stream 3" /></p>

<p>Now that we know what kind of modulation has been used it is easy to calculate the bit lenght using <em>URH</em> as is shown. Selecting manually the area and introducing the value into the proper box. Another really useful thing is that in the bottom it is displayed the stream in bits, hex or ASCII.
<img src="/assets/Garage_Door_RF_communication/ProtocolRerversing/BitLenght.png" alt="Bit lenght " /></p>

<h2 id="reversing-the-communication-protocol">Reversing the communication protocol</h2>

<p>Now we can procude to the analysis tab to reverse enginired the protocol. The first thing I like to do is to chage the view to hexadecimal.
<img src="/assets/Garage_Door_RF_communication/ProtocolRerversing/AnalysisInterface.png" alt="Analysis interface" /></p>

<h2 id="next-step">Next step</h2>

<h2 id="tools-used">Tools used:</h2>

<ul>
<li><a href="https://greatscottgadgets.com/hackrf/">HackRF</a></li>
<li><a href="https://github.com/sthysel/urh">Universal hacker radio</a></li>
<li><a href="https://github.com/osmocom/gr-osmosdr">osmocom_fft</a></li>
</ul>

                    </div>
                    <div class="hmdl-page-comments mdl-color-text--primary-contrast mdl-card__supporting-text comments"> 
                        <strong>
                            	<strong>Doopel</strong>
						</strong>
                        <p></p>
                    </div>  
                </div>                
                <nav class="mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
                    <a href="/post/tamuctf2017/pwn4/">
                        <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                        <i class="icon ion-android-arrow-back"></i>
                        </button>
                        Older
                    </a>
                    <div class="section-spacer"></div>
                </nav>
 
            </div>        
        </main>
        <footer class="mdl-mini-footer">
            <div class="mdl-mini-footer--left-section">                
                <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-mini-footer--social-btn social-btn" href="mailto:Firstname@example.com?subject=Hi">
                    <i class="material-icons_lg icon ion-email"></i>
                    <span class="visuallyhidden">Email</span>
                </a>
                <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-mini-footer--social-btn social-btn" href="https://github.com/BlackHoods">
                    <i class="material-icons_lg icon ion-social-github"></i>
                    <span class="visuallyhidden">Github</span>
                </a>
                <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-mini-footer--social-btn social-btn" href="https://twitter.com/firstname_lastname">
                    <i class="material-icons_lg icon ion-social-twitter "></i>
                    <span class="visuallyhidden">Twitter</span>
                </a>


            </div>
            <div class="mdl-mini-footer--right-section">
                <span>© 2017 </span>
            </div>
        </footer>
        <div class="mdl-layout__obfuscator"></div>
    </div>
    <script src="https://code.getmdl.io/1.1.3/material.min.js"></script>


</body>
</html>

